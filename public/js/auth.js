$(document).ready(function(){$("#login-form").ajaxForm({url:"/engine/profile/login.php",dataType:"text",success:function(e){e=$.parseJSON(e);var i=$("#error-input-server"),t=$("#error-input-username"),n=$("#error-input-password"),a=$(".btn--login");switch(i.empty(),t.empty(),n.empty(),e.status){case"error":switch(e.type){case"invalidserver":i.append("Выберите сервер!"),document.getElementById("#serverId-error");break;case"invalidusername":t.append("Введите ваш ник"),document.getElementById("#username-error");break;case"invalidpassword":n.append("Введите ваш пароль"),document.getElementById("#password-error");break;case"noaccount":a.html(""),a.append('<span id="submit" style="display: block;"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></span>'),setTimeout(function(){n.append("Неверный пароль или логин"),document.getElementById("#password-error"),a.html("Войти"),$("#login-form")[0].reset()},2e3);break;case"dbinvalidserver":a.html(""),a.append('<span id="submit" style="display: block;"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></span>'),setTimeout(function(){i.append("Неверные данные от сервера(mysql_error)"),document.getElementById("#serverId-error"),a.html("Войти"),$("#login-form")[0].reset()},2e3)}break;case"success":a.html(""),a.append('<span id="submit" style="display: block;"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></span>'),setTimeout(function(){location.href=e.url},2e3)}}});var e=0;$("#recovery-form").ajaxForm({url:"/engine/recovery.php",dataType:"text",success:function(i){i=$.parseJSON(i);var t=$("#error-input-server").empty(),n=$("#error-input-email").empty();switch(i.status){case"error":switch(i.type){case"invalidserver":t.append("Выберите сервер!"),document.getElementById("#serverId2");break;case"invalidemail":n.append("Введите e-mail"),document.getElementById("#email");break;case"noemail":e++,$(".btn--login").html(""),$(".btn--login").append('<span id="submit" style="display: block;"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></span>'),$(".vue-notification-group").append("<div data-id="+e+' class="vue-notification-template vue-notification info"><div class="notification-content">Проверяем почту..</div></div>'),setTimeout(function(){$(".vue-notification-template").fadeOut(),setTimeout(function(){$(".vue-notification-template").fadeOut(),$(".vue-notification-template ").remove()},3e3),$(".vue-notification-group").append("<div data-id="+e+' class="vue-notification-template vue-notification error"><div class="notification-content">Аккаунт с такой почной не найден!</div></div>'),$(".btn--login").html("Восстановить"),$("#recovery-form")[0].reset()},3e3)}break;case"success":e++,$(".btn--login").html(""),$(".btn--login").append('<span id="submit" style="display: block;"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></span>'),$(".vue-notification-group").append("<div data-id="+e+' class="vue-notification-template vue-notification info"><div class="notification-content">Проверяем почту..</div></div>'),setTimeout(function(){$(".vue-notification-template").fadeOut(),setTimeout(function(){$(".vue-notification-template").fadeOut(),$(".vue-notification-template ").remove()},3e3),$(".vue-notification-group").append("<div data-id="+e+' class="vue-notification-template vue-notification success"><div class="notification-content">На вашу почту отправлено письмо с дальнешими действиями</div></div>'),$(".btn--login").html("Восстановить"),$("#recovery-form")[0].reset()},3e3)}}});var i=document.location.search,t=new URLSearchParams(i);null!=t.get("token")&&20==t.get("token").length&&($(".vue-notification-group").append("<div data-id="+e+' class="vue-notification-template vue-notification success" style="display: none;"><div class="notification-content">Новый пароль был отправлен вам на почту!</div></div>'),$(".vue-notification-template").fadeIn(500),setTimeout(function(){$(".vue-notification-template").fadeOut(),$(".vue-notification-template ").remove(),history.pushState({},"","/recovery-password")},4e3)),$("#change-pass").ajaxForm({url:"/engine/profile/changepass.php",dataType:"text",success:function(i){i=$.parseJSON(i);var t=$("#error-input-oldpass").empty(),n=$("#error-input-newpass").empty();switch(i.status){case"error":switch(i.type){case"invalidoldpass":t.append("Введите пароль"),document.getElementById("#currentPassword");break;case"errorserver":t.append("Unknown Property"),document.getElementById("#currentPassword");break;case"invalidoldpasserror":t.append("Неверный пароль"),document.getElementById("#currentPassword");break;case"invalidnewpass":n.append("Введите пароль"),document.getElementById("#newPassword");break;case"invalidpassvalue":n.append("Пароль должен содержать не менее 8 символов"),document.getElementById("#newPassword");break;case"nochange":n.append("Запрещено менять пароль на тот же самый!!"),document.getElementById("#newPassword");break;case"invalid":$(".vue-notification-group").append('<div class="vue-notification-template vue-notification error" style="display: none;"><div class="notification-content">Пароли не совпадают</div></div>'),$(".vue-notification-template").fadeIn(500),setTimeout(function(){$(".vue-notification-template").fadeOut(),$(".vue-notification-template ").remove()},3e3),n.append("Пароли не совпадают"),document.getElementById("#newPasswords")}break;case"success":$(".btn--change").html(""),$(".btn--change").append('<span id="submit" style="display: block;"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></span>');$(".vue-notification-template").data("id");setTimeout(function(){$(".vue-notification-template").fadeOut(),setTimeout(function(){$(".vue-notification-template").fadeOut(),$(".vue-notification-template ").remove()},3e3),$(".vue-notification-group").append("<div data-id="+e+' class="vue-notification-template vue-notification success" style="display: none;"><div class="notification-content">Пароль успешно изменён!</div></div>'),$(".vue-notification-template").fadeIn(500),$(".btn--change").html("Изменить"),$("#change-pass")[0].reset()},3e3)}}})})