$(document).ready(function(){$(document).on("click","td.edit",function(){if($("#editbox").length>0)return!1;$(".ajax").html($(".ajax input").val()),$(".ajax").removeClass("ajax");var t=$(this).attr("class").split(" ")[1],e=$(this).parent("tr").data("id");$(this).addClass("ajax").html('<input data-id="'+e+'" data-fieldname="'+t+'" class="form-control" id="editbox" size="'+$(this).text().length+'" type="text" value="'+$(this).text()+'">'),$("#editbox").focus()}),$(document).on("focusout","#editbox",function(t){var e=$(this).parents("table").data("table"),a=$(this).data("fieldname"),i=$(this).data("id");$.ajax({type:"POST",url:"/engine/settings.php",data:"value="+$(this).val()+"&id="+i+"&field="+a+"&table="+e,success:function(t){$(".ajax").html($(".ajax input").val()),$(".ajax").removeClass("ajax")}})}),$(document).on("click","td.status",function(){var t=$(this).parents("table").data("table"),e=$(this).parent("tr").data("id"),a=$(this).attr("class").split(" "),i=($(this).data("fieldname"),a[1]);"success"==i?($(this).removeClass(i),statusid=0,$(this).addClass("failed").html("Выключен")):(statusid=1,$(this).removeClass(i),$(this).addClass("success").html("Включен")),$.ajax({type:"POST",url:"/engine/settings.php",data:"value="+statusid+"&id="+e+"&field="+a[0]+"&table="+t,success:function(t){}})}),$(document).on("click","td.packet_type",function(){var t=$(this).parents("table").data("table"),e=$(this).parent("tr").data("id"),a=$(this).attr("class").split(" "),i=a[1];"specials"==i?($(this).removeClass(i),statusid=0,$(this).addClass("money").html("Money")):"money"==i?(statusid=1,$(this).removeClass(i),$(this).addClass("vip").html("VIP")):"vip"==i?(statusid=2,$(this).removeClass(i),$(this).addClass("admins").html("Admins")):(statusid=3,$(this).removeClass(i),$(this).addClass("specials").html("Specials")),$.ajax({type:"POST",url:"/engine/settings.php",data:"value="+statusid+"&id="+e+"&field="+a[0]+"&table="+t,success:function(t){}})}),$(document).on("click","td.delete",function(){var t=$(this).parents("table").data("table"),e=$(this).parent("tr").data("id"),a=confirm("Подтвердите удаление!");alert(a),!0===a?($.ajax({type:"POST",url:"/engine/settings.php",data:"deleteid="+e+"&table="+t,success:function(t){}}),$(this).parent("tr").fadeOut(1e3,function(){$(this).parent("tr").remove()})):console.log("Отмена")}),$(document).on("click","a.news",function(){$.ajax({url:"/engine/settings.php",type:"POST",dataType:"text",data:"add=yes&table=news",success:function(t){switch((t=$.parseJSON(t)).status){case"success":var e="<tr data-id="+t.type+"><td>"+t.type+'</td> <td class="edit title">Название новости</td> <td class="text"><button class="textedit">Посмотреть</button></td> <td class="edit image">https://i.ytimg.com/vi/2bz08gf8sEI/maxresdefault.jpg</td> <td class="edit date">'+t.time+'</td> <td class="status failed">Выключен</td><td class="delete"><button class="del"></button></td></tr>';$("tbody").append(e)}}})}),$(document).on("click","a.shop",function(){$.ajax({url:"/engine/settings.php",type:"POST",dataType:"text",data:"add=yes&table=shop",success:function(t){switch((t=$.parseJSON(t)).status){case"success":var e="<tr data-id="+t.type+"><td>"+t.type+'</td> <td class="packet_type money">Пакет Money</td> <td class="edit packet_url">/public/img/shop/cash-1.png</td> <td class="edit packet_name">Название товара</td> <td class="edit packet_sum">500000</td> <td class="edit packet_economy">1000000</td><td class="edit packet_admins">0</td> <td class="edit price">100</td> <td class="status failed">Выключен</td><td class="delete"><button class="del"></button></td></tr>';$("tbody").append(e)}}})}),$(document).on("click","a.servers",function(){$.ajax({url:"/engine/settings.php",type:"POST",dataType:"text",data:"add=yes&table=servers",success:function(t){switch((t=$.parseJSON(t)).status){case"success":var e="<tr data-id="+t.type+"><td>"+t.type+'</td> <td class="edit server_name">Phoenix</td> <td class="edit server_ip">185.169.134.3:7777</td> <td class="edit group_vk_url">https://vk.com/public112280295</td> <td class="edit db_host">127.0.0.1</td> <td class="edit db_user">root</td> <td class="edit db_password">clfF60r9EegDSi</td> <td class="edit db_name">arizona_1</td> <td class="status failed">Выключен</td><td class="delete"><button class="del"></button></td></tr>';$("tbody").append(e)}}})}),$.fn.popup=function(){this.css("position","absolute").fadeIn(),this.css("top",($(window).height()-this.height())/2+$(window).scrollTop()+"px"),this.css("left",($(window).width()-this.width())/2+"px"),this.css("display","block").fadeIn(),$(".backpopup").fadeIn()},$(document).on("click","td.text",function(){var t=$(this).parent("tr").data("id");$.ajax({url:"/engine/settings.php",type:"POST",dataType:"text",data:"get_text=yes&table=news&post_id="+t,success:function(e){var a=(e=$.parseJSON(e)).text;$("span.textarea").html('<textarea data-id="'+t+'" class="text_addnews">'+a+"</textarea>"),$(".popup-window").popup()}})}),$(document).on("click","a.savetext",function(t){var e=$(".text_addnews").data("id"),a=$(".text_addnews").val();$.ajax({type:"POST",url:"/engine/settings.php",data:"value="+a+"&field=content&id="+e+"&table=news",success:function(t){$(".popup-window").fadeOut(),$(".backpopup").fadeOut()}})}),$(".backpopup,p.close").click(function(){$(".popup-window").fadeOut(),$(".backpopup").fadeOut()}),$(document).on("click","button#vk_warning",function(t){$(".vue-notification-group").append('<div class="vue-notification-template vue-notification error" style="display: none;"><div class="notification-content">Данная функция в разработке!</div></div>'),$(".vue-notification-template").fadeIn(500),setTimeout(function(){$(".vue-notification-template").fadeOut(1e3),setTimeout(function(){$(".vue-notification-template ").remove()},1e3)},3e3)}),$(document).on("click","button#recovery_code",function(t){var e=$("div#data-value").html(),a=$("div.game-server").data("number");$.ajax({type:"POST",url:"/engine/recovery.php",data:"codebank=recovery&email="+e+"&server="+a,success:function(t){switch((t=$.parseJSON(t)).status){case"error":$(".vue-notification-group").append('<div class="vue-notification-template vue-notification info"><div class="notification-content">Проверяем почту..</div></div>'),setTimeout(function(){$(".vue-notification-template").fadeOut(),setTimeout(function(){$(".vue-notification-template").fadeOut(),setTimeout(function(){$(".vue-notification-template ").remove()},3e3)},3e3),$(".vue-notification-group").append('<div class="vue-notification-template vue-notification error"><div class="notification-content">Почта не найдена!</div></div>')},3e3);break;case"success":$(".vue-notification-group").append('<div class="vue-notification-template vue-notification info"><div class="notification-content">Проверяем почту..</div></div>'),setTimeout(function(){$(".vue-notification-template").fadeOut(),setTimeout(function(){$(".vue-notification-template").fadeOut(),$(".vue-notification-template ").remove()},3e3),$(".vue-notification-group").append('<div class="vue-notification-template vue-notification success"><div class="notification-content">На вашу почту отправлено письмо с дальнешими действиями</div></div>')},3e3)}}})});var t=document.location.search,e=new URLSearchParams(t);null!=e.get("token")&&20==e.get("token").length&&($(".vue-notification-group").append('<div class="vue-notification-template vue-notification success" style="display: none;"><div class="notification-content">Вы успешно сбросили пин код! Новый код: 123456</div></div>'),$(".vue-notification-template").fadeIn(500),setTimeout(function(){$(".vue-notification-template").fadeOut(),setTimeout(function(){$(".vue-notification-template ").remove(),history.pushState({},"","/profile")},2e3)},4e3))})